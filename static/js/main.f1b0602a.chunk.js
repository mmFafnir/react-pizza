(this["webpackJsonpreact-study"]=this["webpackJsonpreact-study"]||[]).push([[0],{32:function(e,t,c){},60:function(e,t,c){},61:function(e,t,c){},62:function(e,t,c){},64:function(e,t,c){},65:function(e,t,c){},66:function(e,t,c){},67:function(e,t,c){},68:function(e,t,c){},71:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),i=c(12),s=c.n(i),r=c(20),j=c(16),l=c.n(j),d=c(23),b=c(3),o=c(33),u=c.n(o),h=c(8),O=c(2),p=(c(60),c(61),c(7)),x=(c(62),c(1)),m=["children","click"],f=function(e){var t=e.children,c=e.click;Object(p.a)(e,m);return Object(x.jsx)("button",{onClick:c,className:"button",children:t})};c(64);var v=function(e){var t=e.totalPrice,c=e.allQuantity;return Object(x.jsx)("header",{className:"header",children:Object(x.jsxs)("div",{className:"header__wrapper",children:[Object(x.jsx)("div",{children:Object(x.jsxs)(h.b,{to:"/",className:"logo",children:[Object(x.jsx)("div",{className:"logo__img",children:Object(x.jsx)("img",{src:"img/logo.svg"})}),Object(x.jsxs)("div",{className:"logo__text",children:[Object(x.jsx)("h1",{children:"REACT PIZZA"}),Object(x.jsx)("p",{children:"\u0441\u0430\u043c\u0430\u044f \u0432\u043a\u0443\u0441\u043d\u0430\u044f \u043f\u0438\u0446\u0446\u0430 \u0432\u043e \u0432\u0441\u0435\u043b\u0435\u043d\u043d\u043e\u0439"})]})]})}),Object(x.jsx)("div",{children:Object(x.jsxs)(h.b,{to:"/basket",className:"header__btn",children:[Object(x.jsxs)("p",{children:[t||0," \u20bd"]}),Object(x.jsx)("hr",{}),Object(x.jsxs)("p",{className:"header__btn_left",children:[Object(x.jsx)("img",{src:"img/basket.svg"})," ",Object(x.jsx)("span",{children:c})]})]})})]})})},g=c(15),z=(c(65),c(19)),_=(c(66),c(34)),N=["title","price","pizzaId","img","tuning","addPizzaCart","pizzaCart","loading"];var y=function(e){var t=e.title,c=e.price,n=e.pizzaId,i=e.img,s=e.tuning,r=e.addPizzaCart,j=e.pizzaCart,l=e.loading,d=void 0!==l&&l,o=Object(p.a)(e,N),u=j.filter((function(e){return e.id==n})),h=Object(a.useState)(u.length>0?u.length:""),O=Object(b.a)(h,2),m=O[0],v=O[1],y=Object(a.useRef)();return Object(x.jsx)(x.Fragment,{children:d?Object(x.jsxs)(_.a,Object(g.a)(Object(g.a)({speed:2,width:280,height:459,viewBox:"0 0 280 459",backgroundColor:"#c7c7c7",foregroundColor:"#e7dfdf"},o),{},{children:[Object(x.jsx)("circle",{cx:"131",cy:"156",r:"122"}),Object(x.jsx)("rect",{x:"9",y:"301",rx:"4",ry:"4",width:"260",height:"33"}),Object(x.jsx)("rect",{x:"9",y:"350",rx:"0",ry:"0",width:"128",height:"21"}),Object(x.jsx)("rect",{x:"9",y:"382",rx:"0",ry:"0",width:"77",height:"21"}),Object(x.jsx)("rect",{x:"142",y:"350",rx:"0",ry:"0",width:"128",height:"21"}),Object(x.jsx)("rect",{x:"100",y:"382",rx:"0",ry:"0",width:"77",height:"21"}),Object(x.jsx)("rect",{x:"190",y:"382",rx:"0",ry:"0",width:"77",height:"21"}),Object(x.jsx)("rect",{x:"168",y:"411",rx:"8",ry:"8",width:"100",height:"28"})]})):Object(x.jsxs)("div",{className:"pizza ",children:[Object(x.jsx)("div",{className:"pizza__img",children:Object(x.jsx)("img",{src:"https://mmfafnir.github.io/react-pizza/img/"+i+".png"})}),Object(x.jsx)("h3",{children:t}),Object(x.jsxs)("form",{className:"pizza-option",ref:y,onSubmit:function(e){e.preventDefault();var a=new FormData(e.target),s={},l="\u043f\u0438\u0446\u0446\u0430"+n;s.id=n,s.title=t,s.price=c,s.img=i,s.quantity=u[0]?u[0].quantity:0;var d,b=Object(z.a)(a.entries());try{for(b.s();!(d=b.n()).done;){var o=d.value,h=o[0].replace(/[^a-z]/,""),O=o[1];l+=O,s[h]=O,s.currentId=l}}catch(x){b.e(x)}finally{b.f()}if(0==j.filter((function(e){return e.currentId==s.currentId}))){var p=u.length;v(p+1)}r(s)},children:[Object(x.jsxs)("div",{className:"pizza-option__form",children:[Object(x.jsx)("div",{className:"pizza-option__side mb-5",children:Object.entries(s.type).map((function(e,t){var c=Object(b.a)(e,2),a=c[0],i=c[1];return Object(x.jsxs)("div",{className:"pizza-option__input",children:[Object(x.jsx)("input",{type:"radio",value:a,name:n+"type",id:n+"type"+t,disabled:"no"==i,defaultChecked:0==t&&"no"!=i||1==t&&"no"!=i}),Object(x.jsx)("label",{htmlFor:n+"type"+t,children:a})]},a)}))}),Object(x.jsx)("div",{className:"pizza-option__side",children:Object.entries(s.size).map((function(e,t){var c=Object(b.a)(e,2),a=c[0],i=c[1];return Object(x.jsxs)("div",{className:"pizza-option__input",children:[Object(x.jsx)("input",{type:"radio",value:a,name:n+"size",id:n+"size"+t,disabled:"no"==i,defaultChecked:0==t&&"no"!=i||1==t&&"no"!=i}),Object(x.jsx)("label",{htmlFor:n+"size"+t,children:a})]},a)}))})]}),Object(x.jsxs)("div",{className:"pizza__footer",children:[Object(x.jsxs)("p",{className:"price",children:["\u043e\u0442 ",c,"\u0420"]}),Object(x.jsxs)(f,{children:[Object(x.jsx)("input",{type:"submit",id:"submit"+n}),Object(x.jsx)("span",{children:"+"}),Object(x.jsx)("span",{className:"mlr-10",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),Object(x.jsx)("span",{className:"quantity",children:m})]})]})]})]})})},k=(c(67),["children","name","option","setSortTab","active"]),C=function(e){var t=e.children,c=e.name,a=e.option,n=e.setSortTab,i=e.active;Object(p.a)(e,k);return Object(x.jsxs)("div",{className:"filter-btn",children:[Object(x.jsx)("input",{onClick:function(){return n(t)},type:"radio",name:c,id:a,defaultChecked:i}),Object(x.jsx)("label",{htmlFor:a,children:t})]})},S=(c(68),["name","values","sortFn"]),w=function(e){var t=e.name,c=e.values,a=e.sortFn,i=(Object(p.a)(e,S),n.a.useRef(),n.a.useState(c[0].ru)),s=Object(b.a)(i,2),r=s[0],j=s[1],l=n.a.useState(!1),d=Object(b.a)(l,2),o=d[0],u=d[1];return Object(x.jsxs)("div",{className:"select",children:[Object(x.jsxs)("button",{onClick:function(){return u(!o)},className:"select__title",children:[Object(x.jsx)("span",{className:"select__title_arrow"}),Object(x.jsx)("span",{className:"select__title_desc",children:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e:"}),Object(x.jsx)("span",{className:"select__value",children:r})]}),Object(x.jsx)("div",{className:o?"select-body  active":"select-body",children:c.map((function(e,c){return Object(x.jsxs)("div",{className:"select-body__item",children:[Object(x.jsx)("input",{onClick:function(){return function(e){a(e.eng),j(e.ru)}(e)},name:t,type:"radio",value:e.eng,id:e.eng}),Object(x.jsx)("label",{for:e.eng,children:e.ru})]},c)}))})]})};var P=function(e){var t=e.pizza,c=e.addPizzaCart,a=e.pizzaCart,i=e.isLoading,s=n.a.useState("\u0432\u0441\u0435"),j=Object(b.a)(s,2),l=j[0],d=j[1],o=n.a.useState("rating"),u=Object(b.a)(o,2),h=u[0],O=u[1];return Object(x.jsxs)("main",{className:"main",children:[Object(x.jsxs)("div",{className:"filter",children:[Object(x.jsxs)("div",{className:"filter__btns",children:[Object(x.jsx)(C,{active:!0,setSortTab:d,name:"ingredients",option:"all",children:"\u0412\u0441\u0435"}),Object(x.jsx)(C,{active:!1,setSortTab:d,name:"ingredients",option:"meat",children:"\u041c\u044f\u0441\u043d\u044b\u0435"}),Object(x.jsx)(C,{active:!1,setSortTab:d,name:"ingredients",option:"vegetarian",children:"\u0412\u0435\u0433\u0435\u0442\u0430\u0440\u0438\u0430\u043d\u0441\u043a\u0430\u044f"}),Object(x.jsx)(C,{active:!1,setSortTab:d,name:"ingredients",option:"grill",children:"\u0413\u0440\u0438\u043b\u044c"}),Object(x.jsx)(C,{active:!1,setSortTab:d,name:"ingredients",option:"sharp",children:"\u041e\u0441\u0442\u0440\u044b\u0435"}),Object(x.jsx)(C,{active:!1,setSortTab:d,name:"ingredients",option:"closed",children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044b\u0435"})]}),Object(x.jsx)("div",{className:"filter-select",children:Object(x.jsx)(w,{sortFn:O,name:"sort",values:[{eng:"rating",ru:"\u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u0438"},{eng:"price",ru:"\u043f\u043e \u0446\u0435\u043d\u0435"},{eng:"alphabet",ru:"\u043f\u043e \u0430\u043b\u0444\u0430\u0432\u0438\u0442\u0443"}]})})]}),Object(x.jsx)("h2",{children:"\u0412\u0441\u0435 \u043f\u0438\u0446\u0446\u044b"}),Object(x.jsx)("div",{className:"menu",children:function(){var e=("\u0432\u0441\u0435"==l.toLowerCase()?t:t.filter((function(e){return e.type.toLowerCase().includes(l.toLowerCase())}))).sort((function(e,t){return function(e,t){return"price"==h?e.price-t.price:"rating"==h?t.rating-e.rating:"alphabet"==h?e.title<t.title?-1:e.title>t.title?1:0:void 0}(e,t)}));return(i?Object(r.a)(Array(8)):e).map((function(e,t){return Object(x.jsx)(y,Object(g.a)({addPizzaCart:c,pizzaCart:a,loading:i},e))}))}()})]})},I=c(72),q=c(73);c(32);var F=function(e){var t=e.item,c=e.changeAllPrice,i=e.deletePizzaCart,s=n.a.useState(1),r=Object(b.a)(s,2),j=r[0],l=r[1],d=function(e){"plus"==e?l(j+1):"minus"==e&&1!=j&&l(j-1)};return Object(a.useEffect)((function(){t.quantity=j,l(t.quantity),c()}),[j]),Object(x.jsxs)("div",{className:"pizza-cart opacity ",children:[Object(x.jsxs)("div",{className:"pizza-cart__left",children:[Object(x.jsx)("div",{className:"pizza-cart__img",children:Object(x.jsx)("img",{src:"https://mmfafnir.github.io/react-pizza/img/"+t.img+".png"})}),Object(x.jsxs)("div",{className:"pizza-cart__desc",children:[Object(x.jsx)("h3",{children:t.title}),Object(x.jsxs)("p",{children:[Object(x.jsxs)("span",{children:[t.type," \u0442\u0435\u0441\u0442\u043e,"]}),Object(x.jsxs)("span",{children:[t.size,"\u0441\u043c"]})]})]})]}),Object(x.jsxs)("div",{className:"pizza-cart__quantity",children:[Object(x.jsx)(f,{click:function(){return d("plus")},children:Object(x.jsx)("span",{className:"plus",children:"+"})}),Object(x.jsx)("p",{children:t.quantity}),Object(x.jsx)(f,{click:function(){return d("minus")},children:Object(x.jsx)("span",{className:"minus",children:"-"})})]}),Object(x.jsxs)("p",{className:"pizza-cart__price",children:[t.price*t.quantity," \u20bd "]}),Object(x.jsx)("button",{onClick:function(){i(t.currentId)},className:"pizza-cart__delete",children:"+"})]})};var T=function(e){var t=e.pizzaCart,c=e.deletePizzaCart,i=e.clearBasket,s=Object(a.useState)(),r=Object(b.a)(s,2),j=r[0],l=r[1],d=Object(a.useState)(),o=Object(b.a)(d,2),u=o[0],O=o[1],p=function(){var e,c,a=t.map((function(e){return e.quantity})),n=t.map((function(e){return e.price*e.quantity})),i=a.map((function(t){return e+=t}),e=0).reverse()[0],s=n.map((function(e){return c+=e}),c=0).reverse()[0];l(i),O(s)};return n.a.useEffect((function(){p()}),[t]),Object(x.jsx)("main",{className:"basket",children:t.length>0?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"basket__header basket-header",children:[Object(x.jsxs)("div",{className:"basket-logo",children:[Object(x.jsx)("div",{className:"basket-logo__img",children:Object(x.jsx)("img",{src:"img/cartlogo.svg"})}),Object(x.jsx)("h2",{children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"})]}),Object(x.jsxs)("button",{onClick:i,className:"basket-clear",children:[Object(x.jsx)("i",{className:"fas fa-trash"}),Object(x.jsx)("span",{children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})]})]}),Object(x.jsx)("div",{className:"basket__body",children:Object(x.jsx)(q.a,{children:t.map((function(e){return Object(x.jsx)(I.a,{timeout:500,classNames:"pizza-cart",children:Object(x.jsx)(F,{item:e,changeAllPrice:p,deletePizzaCart:c})},e.currentId)}))})}),Object(x.jsxs)("div",{className:"basket__footer",children:[Object(x.jsxs)("div",{children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{children:"\u0412\u0441\u0435\u0433\u043e \u043f\u0438\u0446\u0446:"}),Object(x.jsxs)("span",{className:"quantity",children:[j," \u0448\u0442."]})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{children:"\u0421\u0443\u043c\u043c\u0430 \u0437\u0430\u043a\u0430\u0437\u0430:"}),Object(x.jsxs)("span",{className:"price",children:[u," \u20bd"]})]})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)(f,{children:Object(x.jsx)(h.b,{to:"/",className:"btn",children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"})}),Object(x.jsx)(f,{children:Object(x.jsx)("span",{className:"btn btn2",children:"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c \u0441\u0435\u0439\u0447\u0430\u0441"})})]})]})]}):Object(x.jsxs)("div",{className:"basket-empty opacity",children:[Object(x.jsxs)("h2",{children:["\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430\u044f ","("]}),Object(x.jsx)("p",{children:"\u0412\u0435\u0440\u043e\u044f\u0442\u043d\u0435\u0439 \u0432\u0441\u0435\u0433\u043e, \u0432\u044b \u043d\u0435 \u0437\u0430\u043a\u0430\u0437\u044b\u0432\u0430\u043b\u0438 \u0435\u0449\u0451 \u043f\u0438\u0446\u0446\u0443. \u0414\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0438\u0446\u0446\u0443, \u043f\u0435\u0440\u0435\u0439\u0434\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."}),Object(x.jsx)("div",{className:"basket-empty__img",children:Object(x.jsx)("img",{src:"img/layer.svg"})}),Object(x.jsx)(h.b,{to:"/",children:Object(x.jsx)("button",{className:"basket-empty__btn",children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434"})})]})})};var A=function(){var e=n.a.useState([]),t=Object(b.a)(e,2),c=t[0],a=t[1],i=n.a.useState([]),s=Object(b.a)(i,2),j=s[0],o=s[1],p=n.a.useState(j.length),m=Object(b.a)(p,2),f=m[0],g=m[1],z=n.a.useState(j.length),_=Object(b.a)(z,2),N=_[0],y=_[1],k=n.a.useState(!0),C=Object(b.a)(k,2),S=C[0],w=C[1];n.a.useEffect((function(){function e(){return(e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("https://619d484e131c600017088e7d.mockapi.io/pizza");case 2:t=e.sent,a(t.data),w(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),n.a.useEffect((function(){y(function(){var e;return j.map((function(e){return e.price})).map((function(t){return e+=t}),e=0).reverse()[0]}()),g(j.length)}),[f,j]);var I=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),o((function(e){return e.filter((function(e){return e.currentId!==t}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(h.a,{children:[Object(x.jsx)(v,{allQuantity:f,totalPrice:N}),Object(x.jsxs)(O.c,{basename:"/react-pizza",children:[Object(x.jsx)(O.a,{path:"/",element:Object(x.jsx)(P,{pizza:c,pizzaCart:j,addPizzaCart:function(e){j.find((function(t){return t.currentId===e.currentId}))||(o((function(t){return[].concat(Object(r.a)(t),[e])})),g(j.length+1))},isLoading:S})}),Object(x.jsx)(O.a,{path:"/basket",element:Object(x.jsx)(T,{pizzaCart:j,deletePizzaCart:I,clearBasket:function(){o([])}})})]})]})})};s.a.render(Object(x.jsx)(A,{}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.f1b0602a.chunk.js.map